<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>购物车管理</title>
  <!-- Bootstrap CSS -->
  <link href="/static/css/bootstrap.min.css" rel="stylesheet"></head>
<body>
<div class="container mt-5">
  <h1 class="text-center">购物车管理</h1>

  <!-- 购物车 -->
  <div class="row mt-4">
    <div class="col-md-12">
      <h2>购物车</h2>
      <ul class="list-group mb-3" id="cart-items">
        <!-- 示例购物车项 -->
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="cart-item">
            <span class="item-name">商品 1</span>
            <span class="item-price">$10.00</span>
          </div>
          <div>
            <input type="number" class="form-control quantity" value="1" min="1" data-price="10.00">
          </div>
          <button class="btn btn-danger btn-sm remove-item" data-price="10.00">移除</button>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="cart-item">
            <span class="item-name">商品 2</span>
            <span class="item-price">$15.00</span>
          </div>
          <div>
            <input type="number" class="form-control quantity" value="1" min="1" data-price="15.00">
          </div>
          <button class="btn btn-danger btn-sm remove-item" data-price="15.00">移除</button>
        </li>
        <!-- 可以添加更多购物车项 -->
      </ul>
      <h3 class="text-right">总计: $<span id="total-amount">25.00</span></h3>
      <button class="btn btn-success btn-block" id="checkout-btn">结账</button>
    </div>
  </div>
</div>

<!-- Bootstrap JS and dependencies -->
<!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>-->
<script src="/static/js/bootstrap.bundle.min.js"></script>

<!-- 自定义脚本 -->
<script>
  $(document).ready(function() {
    // 更新总计金额
    function updateTotalAmount() {
      var totalAmount = 0;
      $('#cart-items .quantity').each(function() {
        var quantity = parseInt($(this).val());
        var price = parseFloat($(this).data('price'));
        totalAmount += quantity * price;
      });
      $('#total-amount').text(totalAmount.toFixed(2));
    }

    // 移除商品从购物车
    $(document).on('click', '.remove-item', function() {
      $(this).closest('li').remove();
      updateTotalAmount();
    });

    // 监听数量变化
    $(document).on('input', '.quantity', function() {
      updateTotalAmount();
    });

    // 结账按钮
    $('#checkout-btn').click(function() {
      alert('结账功能尚未实现');
    });

    // 初始更新总计金额
    updateTotalAmount();
  });
</script>
</body>
</html>
